---
import { getCollection, getEntries } from 'astro:content';
import TabWindow from './TabWindow.astro';
import EducationSection from './EducationSection.astro';
import { getLangFromUrl } from '../../../../modules/i18n/index.mts';

const langFromUrl = getLangFromUrl(Astro.url);
const allEducationSections = await getCollection('educationSection');
const educationSections = allEducationSections.filter((eduSec) => {
  const [lang, ...slug] = eduSec.id.split('/');
  return lang == langFromUrl;
});
---

<TabWindow id="education">
  <ul class="education-sections | flow">
    {
      educationSections
        .sort((a, b) => a.data.order - b.data.order)
        .map((e) => <EducationSection educationSection={e} />)
    }
  </ul>
</TabWindow>

<style lang="scss">
  @use '/../src/styles/abstracts' as *;

  .education-sections {
    --flow-space: 0.75rem;
    list-style: none;
    margin-top: 0.5rem;

    &:hover :global(.education-section:not(:hover)) {
      opacity: 70%;
    }
  }
</style>
